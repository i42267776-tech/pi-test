<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi Korea Music Test</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body style="text-align: center; padding-top: 50px; font-family: sans-serif;">

    <button id="pay-button" style="background-color: #673ab7; color: white; padding: 20px 40px; font-size: 22px; border: none; border-radius: 15px; cursor: pointer; font-weight: bold;">
        0.1 Pi 결제하기 (클릭)
    </button>

    <h2 style="margin-top: 30px; color: #333;">Pi Korea Music Test</h2>

    <script>
        // 파이 초기화
        const Pi = window.Pi;
        Pi.init({ version: "1.5", sandbox: true });

        // 버튼 클릭 이벤트
        document.getElementById('pay-button').addEventListener('click', function() {
            console.log("결제 시도 중...");
            
            Pi.createPayment({
                amount: 0.1,
                memo: "Pi Korea Music 테스트 결제",
                metadata: { orderId: "music_test_001" }
            }, {
                onReadyForServerApproval: function(paymentId) {
                    console.log("승인 대기중:", paymentId);
                },
                onReadyForServerCompletion: function(paymentId, txid) {
                    console.log("결제 완료! 트랜잭션 ID:", txid);
                    alert("결제가 완료되었습니다!");
                },
                onCancel: function(paymentId) {
                    console.log("결제 취소");
                },
                onError: function(error, payment) {
                    console.error("에러 발생:", error);
                    alert("에러가 발생했습니다: " + error.message);
                }
            });
        });
    </script>
</body>
</html>
